# poetry-gen

The Basic Poetry Generator


This is a poetry generator that utilizes a version of genetic algorithms. The system first web-scrapes netpoets.com by looking up a keyword and collects all poems on the first page (max of 25). 
If there aren't any, a "try new" message is printed. The system then structures the parsed text in a 3D array. The most inner one is an array of sentences, and each array represents one complete sentence. Then the next layer represents each verse, which includes one or more complete sentences. The most outer layer is the entire text, which represents multiple verses. Lastly, the system generates a new poem by essentially mixing complete sentences from different verses. And it's evaluated by the similarity feature from the spacy library. A selection pool is first generated by crossing over probabilistically selected segments from different verses. Then the final output is selected from the pool probabilistically.


Simply type in the keyword and the number of verses desired in the main function call and run the program. It's going to take a few seconds for it to generate because of all the different components of the system.


This project was a wave of obstacles. Naturally, the goal initially was to come up with a system that's capable of generating completely original poems, incorporating the various similes and metaphors we have discussed in class. And after a week of brainstorming ideas and browsing all sorts of papers, I realized the initial goal might not be too realistic for the amount of time I have, as I should've known. With one week left, I figured I should probably lower the expectations and just start somewhere. I began with a simple web-scraping that gets a bunch of poems from a website. Web scraping was new to me, but already knowing HTML made it relatively easy. 

The rest of the project was mostly finding python libraries and experimenting with algorithms we learned already. I first went with the Markov chains approach, creating a frequency table and selecting the next word probabilistically. The output ended up being complete gibberish, as expected, with incorrect punctuations everywhere. Then I thought about dividing all words into "first", "last" and the rest. This way, I could at least end the sentence with an end-word, and start a new one with a "first" word. I also experimented with the spacy tags that I think tells the grammatic token of each word, attempting to construct grammatically correct sentences. This didn't end well either because I failed to parse the various ending characters and it might "work" for one keyword, but not the others. All attempts here are stored in extra.py.

This is when I gave up on generating completely new text, and I stumbled upon an article that uses the similarity function from the spacy library. Once I have identify this fitness function, I turned to genetic algorithms by utilize existing sentences to create new poems. This approach is somewhat mere generation, but it's the best shot I've got to generating anything that looks like a poem. I parsed the text into verses of complete sentences and crossing-over sentences to form new verses, and it's evaluated by the similarity function from the spacy library. 

Lastly, as for the text-to-speech feature, I used the pyttsx3 library because the default os one doesn't recognize a lot of the words and it would just skip a bunch of lines. 


Papers and sources:
1. https://www.researchgate.net/publication/313874773_NLP_based_Poetry_Analysis_and_Generation (Markov chains and keyword extraction)
2. https://era.ed.ac.uk/bitstream/handle/1842/314/IP040022.pdf?sequence=1 (meaningfulness, grammaticality, and poeticness (Mostly grammaticality is where i started thinking how i should approach this project))
3. https://arxiv.org/pdf/2002.02511.pdf (This gave me an idea that i didn't get to implement, which is to use the Thesaurus Rex to find related words to the keyword to better improve the fitness function)
4. https://towardsdatascience.com/creating-a-poems-generator-using-word-embeddings-bcc43248de4f 
https://spacy.io/usage/linguistic-features#vectors-similarity
(Similarity)